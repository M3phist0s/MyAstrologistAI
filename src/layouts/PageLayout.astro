---
import React from 'react';
import Auth0ProviderWithHistory from '../auth/Auth0ProviderWithHistory';

// Ensure these imports are for Astro components
import Layout from '~/layouts/Layout.astro';
import Header from '~/components/widgets/Header.astro';
import Footer from '~/components/widgets/Footer.astro';
import Announcement from '~/components/widgets/Announcement.astro';

import { headerData, footerData } from '~/navigation';
import type { MetaData } from '~/types';

export interface Props {
  metadata?: MetaData;
}

const PageLayout = ({ metadata, children }) => {
  return (
    <Auth0ProviderWithHistory>
      <Layout metadata={metadata}>
        <slot name="announcement">
          <Announcement />
        </slot>
        <slot name="header">
          <Header {...headerData} isSticky showRssFeed showToggleTheme />
        </slot>
        <main>
          {children}
        </main>
        <slot name="footer">
          <Footer {...footerData} />
        </slot>
      </Layout>
    </Auth0ProviderWithHistory>
  );
};

export default PageLayout;
